<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:Intune.Commander.Desktop.ViewModels"
             xmlns:lvc="using:LiveChartsCore.SkiaSharpView.Avalonia"
             xmlns:suki="https://github.com/kikipoulet/SukiUI"
             xmlns:mi="clr-namespace:Material.Icons.Avalonia;assembly=Material.Icons.Avalonia"
             xmlns:icons="clr-namespace:Material.Icons;assembly=Material.Icons"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="900"
             x:Class="Intune.Commander.Desktop.Views.OverviewView"
             x:DataType="vm:OverviewViewModel">

    <Panel>
    <!-- Loading overlay -->
    <suki:BusyArea BusyText="Loading dashboard data..."
                   IsBusy="{Binding IsLoading}"
                   IsVisible="{Binding IsLoading}"
                   ZIndex="10" />

    <!-- Dashboard content -->
    <ScrollViewer HorizontalScrollBarVisibility="Disabled" IsVisible="{Binding !IsLoading}">
        <StackPanel Margin="16" Spacing="16">

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <!-- Tenant Banner                              -->
            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <suki:GlassCard Padding="16">
                <Grid ColumnDefinitions="*,Auto">
                    <StackPanel Spacing="4">
                        <TextBlock Text="{Binding TenantName}" FontSize="20" FontWeight="Bold" />
                        <StackPanel Orientation="Horizontal" Spacing="12">
                            <TextBlock FontSize="12" Foreground="{DynamicResource SukiLowText}">
                                <Run Text="Tenant ID:" />
                                <Run Text="{Binding TenantId}" />
                            </TextBlock>
                            <TextBlock FontSize="12" Foreground="{DynamicResource SukiLowText}">
                                <Run Text="Cloud:" />
                                <Run Text="{Binding CloudEnvironment}" />
                            </TextBlock>
                        </StackPanel>
                    </StackPanel>
                    <TextBlock Grid.Column="1" Text="ðŸ“Š" FontSize="32"
                               VerticalAlignment="Center" Opacity="0.5" />
                </Grid>
            </suki:GlassCard>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <!-- Summary Cards Row                          -->
            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <UniformGrid Columns="3" Margin="0,0,0,0">
                <!-- Device Configs -->
                <Button Command="{Binding NavigateToDeviceConfigsCommand}"
                        Padding="0" Margin="0,0,8,0"
                        Background="Transparent" BorderThickness="0"
                        Cursor="Hand" HorizontalAlignment="Stretch"
                        ToolTip.Tip="View Device Configurations">
                    <suki:GlassCard Padding="16">
                        <StackPanel HorizontalAlignment="Center">
                            <mi:MaterialIcon Kind="{x:Static icons:MaterialIconKind.Cog}" Width="24" Height="24" HorizontalAlignment="Center"
                                             Foreground="#2196F3" />
                            <TextBlock Text="{Binding TotalDeviceConfigs}" FontSize="28" FontWeight="Bold"
                                       HorizontalAlignment="Center" Foreground="#2196F3" />
                            <TextBlock Text="Device Configs" FontSize="12" Foreground="{DynamicResource SukiLowText}"
                                       HorizontalAlignment="Center" />
                        </StackPanel>
                    </suki:GlassCard>
                </Button>
                <!-- Compliance Policies -->
                <Button Command="{Binding NavigateToCompliancePoliciesCommand}"
                        Padding="0" Margin="4,0,4,0"
                        Background="Transparent" BorderThickness="0"
                        Cursor="Hand" HorizontalAlignment="Stretch"
                        ToolTip.Tip="View Compliance Policies">
                    <suki:GlassCard Padding="16">
                        <StackPanel HorizontalAlignment="Center">
                            <mi:MaterialIcon Kind="{x:Static icons:MaterialIconKind.ShieldCheck}" Width="24" Height="24" HorizontalAlignment="Center"
                                             Foreground="#4CAF50" />
                            <TextBlock Text="{Binding TotalCompliancePolicies}" FontSize="28" FontWeight="Bold"
                                       HorizontalAlignment="Center" Foreground="#4CAF50" />
                            <TextBlock Text="Compliance Policies" FontSize="12" Foreground="{DynamicResource SukiLowText}"
                                       HorizontalAlignment="Center" />
                        </StackPanel>
                    </suki:GlassCard>
                </Button>
                <!-- Applications -->
                <Button Command="{Binding NavigateToApplicationsCommand}"
                        Padding="0" Margin="8,0,0,0"
                        Background="Transparent" BorderThickness="0"
                        Cursor="Hand" HorizontalAlignment="Stretch"
                        ToolTip.Tip="View Applications">
                    <suki:GlassCard Padding="16">
                        <StackPanel HorizontalAlignment="Center">
                            <mi:MaterialIcon Kind="{x:Static icons:MaterialIconKind.Apps}" Width="24" Height="24" HorizontalAlignment="Center"
                                             Foreground="#FF9800" />
                            <TextBlock Text="{Binding TotalApplications}" FontSize="28" FontWeight="Bold"
                                       HorizontalAlignment="Center" Foreground="#FF9800" />
                            <TextBlock Text="Applications" FontSize="12" Foreground="{DynamicResource SukiLowText}"
                                       HorizontalAlignment="Center" />
                        </StackPanel>
                    </suki:GlassCard>
                </Button>
            </UniformGrid>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <!-- Summary Cards Row 2                        -->
            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <UniformGrid Columns="4" Margin="0,0,0,0">
                <!-- Settings Catalog -->
                <Button Command="{Binding NavigateToSettingsCatalogCommand}"
                        Padding="0" Margin="0,0,8,0"
                        Background="Transparent" BorderThickness="0"
                        Cursor="Hand" HorizontalAlignment="Stretch"
                        ToolTip.Tip="View Settings Catalog Policies">
                    <suki:GlassCard Padding="16">
                        <StackPanel HorizontalAlignment="Center">
                            <mi:MaterialIcon Kind="{x:Static icons:MaterialIconKind.TuneVariant}" Width="24" Height="24" HorizontalAlignment="Center"
                                             Foreground="#9C27B0" />
                            <TextBlock Text="{Binding TotalSettingsCatalog}" FontSize="28" FontWeight="Bold"
                                       HorizontalAlignment="Center" Foreground="#9C27B0" />
                            <TextBlock Text="Settings Catalog" FontSize="12" Foreground="{DynamicResource SukiLowText}"
                                       HorizontalAlignment="Center" />
                        </StackPanel>
                    </suki:GlassCard>
                </Button>
                <!-- Endpoint Security -->
                <Button Command="{Binding NavigateToEndpointSecurityCommand}"
                        Padding="0" Margin="4,0,4,0"
                        Background="Transparent" BorderThickness="0"
                        Cursor="Hand" HorizontalAlignment="Stretch"
                        ToolTip.Tip="View Endpoint Security Policies">
                    <suki:GlassCard Padding="16">
                        <StackPanel HorizontalAlignment="Center">
                            <mi:MaterialIcon Kind="{x:Static icons:MaterialIconKind.Security}" Width="24" Height="24" HorizontalAlignment="Center"
                                             Foreground="#00BCD4" />
                            <TextBlock Text="{Binding TotalEndpointSecurity}" FontSize="28" FontWeight="Bold"
                                       HorizontalAlignment="Center" Foreground="#00BCD4" />
                            <TextBlock Text="Endpoint Security" FontSize="12" Foreground="{DynamicResource SukiLowText}"
                                       HorizontalAlignment="Center" />
                        </StackPanel>
                    </suki:GlassCard>
                </Button>
                <!-- Conditional Access -->
                <Button Command="{Binding NavigateToConditionalAccessCommand}"
                        Padding="0" Margin="4,0,4,0"
                        Background="Transparent" BorderThickness="0"
                        Cursor="Hand" HorizontalAlignment="Stretch"
                        ToolTip.Tip="View Conditional Access Policies">
                    <suki:GlassCard Padding="16">
                        <StackPanel HorizontalAlignment="Center">
                            <mi:MaterialIcon Kind="{x:Static icons:MaterialIconKind.ShieldLockOutline}" Width="24" Height="24" HorizontalAlignment="Center"
                                             Foreground="#E91E63" />
                            <TextBlock Text="{Binding TotalConditionalAccess}" FontSize="28" FontWeight="Bold"
                                       HorizontalAlignment="Center" Foreground="#E91E63" />
                            <TextBlock Text="Conditional Access" FontSize="12" Foreground="{DynamicResource SukiLowText}"
                                       HorizontalAlignment="Center" />
                        </StackPanel>
                    </suki:GlassCard>
                </Button>
                <!-- App Protection -->
                <Button Command="{Binding NavigateToAppProtectionCommand}"
                        Padding="0" Margin="8,0,0,0"
                        Background="Transparent" BorderThickness="0"
                        Cursor="Hand" HorizontalAlignment="Stretch"
                        ToolTip.Tip="View App Protection Policies">
                    <suki:GlassCard Padding="16">
                        <StackPanel HorizontalAlignment="Center">
                            <mi:MaterialIcon Kind="{x:Static icons:MaterialIconKind.CellphoneLock}" Width="24" Height="24" HorizontalAlignment="Center"
                                             Foreground="#795548" />
                            <TextBlock Text="{Binding TotalAppProtection}" FontSize="28" FontWeight="Bold"
                                       HorizontalAlignment="Center" Foreground="#795548" />
                            <TextBlock Text="App Protection" FontSize="12" Foreground="{DynamicResource SukiLowText}"
                                       HorizontalAlignment="Center" />
                        </StackPanel>
                    </suki:GlassCard>
                </Button>
            </UniformGrid>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <!-- Summary Cards Row 3                        -->
            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <UniformGrid Columns="4" Margin="0,0,0,0">
                <!-- Administrative Templates -->
                <Button Command="{Binding NavigateToAdministrativeTemplatesCommand}"
                        Padding="0" Margin="0,0,8,0"
                        Background="Transparent" BorderThickness="0"
                        Cursor="Hand" HorizontalAlignment="Stretch"
                        ToolTip.Tip="View Administrative Templates">
                    <suki:GlassCard Padding="16">
                        <StackPanel HorizontalAlignment="Center">
                            <mi:MaterialIcon Kind="{x:Static icons:MaterialIconKind.FileDocumentOutline}" Width="24" Height="24" HorizontalAlignment="Center"
                                             Foreground="#607D8B" />
                            <TextBlock Text="{Binding TotalAdministrativeTemplates}" FontSize="28" FontWeight="Bold"
                                       HorizontalAlignment="Center" Foreground="#607D8B" />
                            <TextBlock Text="Admin Templates" FontSize="12" Foreground="{DynamicResource SukiLowText}"
                                       HorizontalAlignment="Center" />
                        </StackPanel>
                    </suki:GlassCard>
                </Button>
                <!-- Enrollment Configurations -->
                <Button Command="{Binding NavigateToEnrollmentConfigsCommand}"
                        Padding="0" Margin="4,0,4,0"
                        Background="Transparent" BorderThickness="0"
                        Cursor="Hand" HorizontalAlignment="Stretch"
                        ToolTip.Tip="View Enrollment Configurations">
                    <suki:GlassCard Padding="16">
                        <StackPanel HorizontalAlignment="Center">
                            <mi:MaterialIcon Kind="{x:Static icons:MaterialIconKind.AccountPlusOutline}" Width="24" Height="24" HorizontalAlignment="Center"
                                             Foreground="#3F51B5" />
                            <TextBlock Text="{Binding TotalEnrollmentConfigs}" FontSize="28" FontWeight="Bold"
                                       HorizontalAlignment="Center" Foreground="#3F51B5" />
                            <TextBlock Text="Enrollment Configs" FontSize="12" Foreground="{DynamicResource SukiLowText}"
                                       HorizontalAlignment="Center" />
                        </StackPanel>
                    </suki:GlassCard>
                </Button>
                <!-- Scripts -->
                <Button Command="{Binding NavigateToScriptsCommand}"
                        Padding="0" Margin="4,0,4,0"
                        Background="Transparent" BorderThickness="0"
                        Cursor="Hand" HorizontalAlignment="Stretch"
                        ToolTip.Tip="View Device Scripts">
                    <suki:GlassCard Padding="16">
                        <StackPanel HorizontalAlignment="Center">
                            <mi:MaterialIcon Kind="{x:Static icons:MaterialIconKind.ScriptTextOutline}" Width="24" Height="24" HorizontalAlignment="Center"
                                             Foreground="#009688" />
                            <TextBlock Text="{Binding TotalScripts}" FontSize="28" FontWeight="Bold"
                                       HorizontalAlignment="Center" Foreground="#009688" />
                            <TextBlock Text="Scripts" FontSize="12" Foreground="{DynamicResource SukiLowText}"
                                       HorizontalAlignment="Center" />
                        </StackPanel>
                    </suki:GlassCard>
                </Button>
                <!-- Unassigned Apps -->
                <Button Command="{Binding NavigateToUnassignedAppsCommand}"
                        Padding="0" Margin="8,0,0,0"
                        Background="Transparent" BorderThickness="0"
                        Cursor="Hand" HorizontalAlignment="Stretch"
                        ToolTip.Tip="View Unassigned Applications">
                    <suki:GlassCard Padding="16">
                        <StackPanel HorizontalAlignment="Center">
                            <mi:MaterialIcon Kind="{x:Static icons:MaterialIconKind.AlertOutline}" Width="24" Height="24" HorizontalAlignment="Center"
                                             Foreground="#F44336" />
                            <TextBlock Text="{Binding UnassignedAppCount}" FontSize="28" FontWeight="Bold"
                                       HorizontalAlignment="Center" Foreground="#F44336" />
                            <TextBlock Text="Unassigned Apps" FontSize="12" Foreground="{DynamicResource SukiLowText}"
                                       HorizontalAlignment="Center" />
                        </StackPanel>
                    </suki:GlassCard>
                </Button>
            </UniformGrid>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <!-- Charts Row: Pie charts side by side        -->
            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <Grid ColumnDefinitions="*,16,*">
                <!-- Apps by Platform -->
                <suki:GlassCard Padding="12">
                    <DockPanel>
                        <TextBlock DockPanel.Dock="Top" Text="Applications by Platform"
                                   FontSize="14" FontWeight="SemiBold" Margin="0,0,0,4" />
                        <lvc:PieChart Series="{Binding AppsByPlatformSeries}"
                                      LegendPosition="Bottom"
                                      Height="220" />
                    </DockPanel>
                </suki:GlassCard>

                <!-- Configs by Platform -->
                <suki:GlassCard Grid.Column="2" Padding="12">
                    <DockPanel>
                        <TextBlock DockPanel.Dock="Top" Text="Configurations by Platform"
                                   FontSize="14" FontWeight="SemiBold" Margin="0,0,0,4" />
                        <lvc:PieChart Series="{Binding ConfigsByPlatformSeries}"
                                      LegendPosition="Bottom"
                                      Height="220" />
                    </DockPanel>
                </suki:GlassCard>
            </Grid>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <!-- Recently Modified                          -->
            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <suki:GlassCard Padding="12">
                <DockPanel>
                    <TextBlock DockPanel.Dock="Top" Text="Recently Modified"
                               FontSize="14" FontWeight="SemiBold" Margin="0,0,0,8" />
                    <ItemsControl ItemsSource="{Binding RecentlyModified}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border Padding="6,4" Margin="0,0,0,2"
                                        CornerRadius="4">
                                    <Grid ColumnDefinitions="*,Auto,Auto">
                                        <TextBlock Text="{Binding Name}" FontSize="13"
                                                   TextTrimming="CharacterEllipsis"
                                                   VerticalAlignment="Center" />
                                        <Border Grid.Column="1" Background="{DynamicResource SukiPrimaryColor}"
                                                CornerRadius="2" Padding="6,1" Margin="8,0"
                                                VerticalAlignment="Center">
                                            <TextBlock Text="{Binding Category}" FontSize="10"
                                                       Foreground="White" />
                                        </Border>
                                        <TextBlock Grid.Column="2" Text="{Binding ModifiedText}"
                                                   FontSize="11" Foreground="{DynamicResource SukiLowText}"
                                                   VerticalAlignment="Center" />
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </DockPanel>
            </suki:GlassCard>

        </StackPanel>
    </ScrollViewer>
    </Panel>
</UserControl>
